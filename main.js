(()=>{"use strict";var e,t=document.querySelector("#popup-edit"),n=document.querySelector(".profile__edit-button"),o=t.querySelector("#edit-profile"),r=t.querySelector("#name"),c=t.querySelector("#about-name"),u=document.querySelector(".profile__name"),a=document.querySelector(".profile__about-name"),i=document.querySelector("#popup-add"),s=document.querySelector(".profile__add-button"),l=document.querySelector(".elements"),p=document.querySelectorAll(".popup__icon"),d=document.querySelector("#element-template").content,m=i.querySelector("#title"),f=i.querySelector("#link"),v=i.querySelector("#add-card"),y=document.querySelector("#popup-view-img"),_=document.querySelector(".popup__img"),S=document.querySelector(".popup__caption"),q=document.querySelectorAll(".popup");function k(e){"Escape"===e.key&&E(document.querySelector(".popup_opened"))}function g(e){e.classList.add("popup_opened"),document.addEventListener("keydown",k)}function E(e){e.classList.remove("popup_opened"),document.removeEventListener("keydown",k)}function L(e,t){var n=d.querySelector(".element").cloneNode(!0),o=n.querySelector(".element__delete");return n.querySelector(".element__mask-group").src=e,n.querySelector(".element__mask-group").alt=t,n.querySelector(".element__name-group").textContent=t,n.querySelector(".element__group").addEventListener("click",(function(e){e.target.classList.toggle("element__group_active")})),n.querySelector(".element__mask-group").addEventListener("click",(function(n){!function(e,t){g(y),_.src=e,_.alt=t,S.textContent=t}(e,t)})),o.addEventListener("click",(function(e){e.stopPropagation(),n.remove()})),n}function C(e,t,n){!function(e){return e.some((function(e){return!e.validity.valid}))}(e)?(t.disabled=!1,t.classList.remove(n.inactiveButtonClass)):(t.disabled=!0,t.classList.add(n.inactiveButtonClass))}[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}].forEach((function(e){l.append(L(e.link,e.name))})),n.addEventListener("click",(function(){r.value=u.textContent,c.value=a.textContent,g(t)})),p.forEach((function(e){var t=e.closest(".popup");e.addEventListener("click",(function(){return E(t)}))})),o.addEventListener("submit",(function(e){e.preventDefault(),u.textContent=r.value,a.textContent=c.value,E(t)})),s.addEventListener("click",(function(){g(i)})),v.addEventListener("submit",(function(e){e.preventDefault(),l.prepend(L(f.value,m.value)),E(i),e.target.reset()})),q.forEach((function(e){e.addEventListener("mousedown",(function(t){t.target.classList.contains("popup_opened")&&E(e)}))})),e={formSelector:".popup__container",inputSelector:".popup__put-field",submitButtonSelector:".popup__submit-button",inactiveButtonClass:"popup__submit-button_inactive",inputErrorClass:"popup__put-field_type_error",errorClass:"popup__put-field-error_active"},Array.from(document.querySelectorAll(e.formSelector)).forEach((function(t){!function(e,t){var n=Array.from(e.querySelectorAll(t.inputSelector)),o=e.querySelector(t.submitButtonSelector);C(n,o,t),e.addEventListener("reset",(function(){n.forEach((function(e){e.value=""})),C(n,o,t)})),n.forEach((function(r){r.addEventListener("input",(function(){!function(e,t,n){t.validity.patternMismatch?t.setCustomValidity(t.dataset.errorMessage):t.setCustomValidity(""),t.validity.valid?function(e,t,n){var o=e.querySelector(".".concat(t.id,"-error"));t.classList.remove(n.inputErrorClass),o.classList.remove(n.errorClass),o.textContent=""}(e,t,n):function(e,t,n,o){var r=e.querySelector(".".concat(t.id,"-error"));t.classList.add(o.inputErrorClass),r.textContent=n,r.classList.add(o.errorClass)}(e,t,t.validationMessage,n)}(e,r,t),C(n,o,t)}))}))}(t,e)}))})();